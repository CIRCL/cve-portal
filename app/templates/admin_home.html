{% extends "base.html" %}

{% import "bootstrap/wtf.html" as wtf %}
{% block title %} CVE-PORTAL {% endblock %}

{% block page_content %}
</br>
<div class="panel panel-primary">
    <div class="panel-heading">Users</div>
    <div class="panel-body">
        <div class="btn-group">
        <button type="button" class="btn btn-success" data-target="#NewUserModal" data-toggle="modal">
        <span class="glyphicon glyphicon-plus"></span> New User
        </button>
        <button type="button" class="btn btn-info" data-target="#UpdateUserModal" data-toggle="modal" id="get-selection">
        <span class="glyphicon glyphicon-refresh"></span> Update User
        </button>
        <button type="button" class="btn btn-danger" data-target="#DeleteUserModal" data-toggle="modal">
        <span class="glyphicon glyphicon-remove"></span> Delete User
        </button>
        </div>
    </div>
    <table id="usertable" data-toggle="table" data-url="{{ url_for('userjson') }}" data-click-to-select="true" data-striped="true" data-sort-name="name" data-sort-order="desc" data-side-pagination="server" data-pagination="true">
        <thead>
        <tr>
            <th data-field="state" data-radio="true"></th>
            <th data-field="id" data-sortable="true">ID</th>
            <th data-field="name" data-sortable="true">Name</th>
            <th data-field="email" data-sortable="true">Email</th>
            <th data-field="affiliation" data-sortable="true">Affiliation</th>
            <th data-field="pgp">PGP</th>
            <th data-field="role_id">Role</th>
            <th data-field="confirmed">Confirmed</th>
        </tr>
        </thead>
    </table>
</div>

<!-- MODAL -->
<div class="modal fade" id="NewUserModal" tabindex="-1" role="dialog" aria-labelledby="NewUserModal" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header label-success">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Add User</h4>
            </div>
            <div id="addformmodal" class="modal-body">
                {{ wtf.quick_form(newform) }}
            </div>
        </div>
    </div>
</div>
</div>

<div class="modal fade" id="UpdateUserModal" tabindex="-1" role="dialog" aria-labelledby="UpdateUserModal" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header label-info">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Update User</h4>
            </div>
            <div id="updateformmodal" class="modal-body">
                {{ wtf.quick_form(updateform) }}
            </div>
        </div>
    </div>
</div>
</div>

<div class="modal fade" id="DeleteUserModal" tabindex="-1" role="dialog" aria-labelledby="DeleteUserModal" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header label-danger">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Delete User</h4>
            </div>
            <div id="deleteformmodal" class="modal-body">
                {{ wtf.quick_form(deleteform) }}
            </div>
        </div>
    </div>
</div>
</div>


{% endblock %}
