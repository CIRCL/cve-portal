{% extends "base.html" %}

{% import "bootstrap/wtf.html" as wtf %}
{% block title %} CVE-PORTAL {% endblock %}

{% block page_content %}
</br>
<div class="panel panel-primary">
    <div class="panel-heading">Users</div>
    <div class="panel-body">
            <button id="add-user" type="button" class="btn btn-success" data-target="#NewUserModal" data-toggle="modal">
                <span class="glyphicon glyphicon-plus"></span> New User
            </button>
    </div>
    <table id="usertable" data-toggle="table" data-url="{{ url_for('main.userjson') }}" data-click-to-select="true" data-striped="true" data-sort-name="name" data-sort-order="desc" data-side-pagination="server" data-pagination="true">
        <thead>
            <tr>
                <th data-field="id" data-sortable="true" data-visible="false">ID</th>
                <th data-field="name" data-sortable="true">Name</th>
                <th data-field="email" data-sortable="true">Email</th>
                <th data-field="affiliation" data-sortable="true">Affiliation</th>
                <th data-field="role_id2" data-visible="false">Role id</th>
                <th data-field="fingerprint">Fingerprint</th>
                <th data-field="pgp" data-visible="false">PGP</th>
                <th data-field="role_id">Role</th>
                <th data-field="confirmed">Confirmed</th>
                <th data-field="operate" data-formatter="userOperateFormatter" data-align="center" data-events="userOperateEvents"></th>
            </tr>
        </thead>
    </table>
</div>

<!-- MODAL -->
<div class="modal fade" id="NewUserModal" tabindex="-1" role="dialog" aria-labelledby="NewUserModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header label-success">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Add User</h4>
            </div>
            <div id="addformmodal" class="modal-body">
                {{ wtf.quick_form(newform) }}
            </div>
        </div>
    </div>
</div>
</div>

<div class="modal fade" id="UpdateUserModal" tabindex="-1" role="dialog" aria-labelledby="UpdateUserModal" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header label-info">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Update User</h4>
        </div>
        <div id="updateformmodal" class="modal-body">
            {{ wtf.quick_form(updateform) }}
        </div>
    </div>
</div>
</div>
</div>

<div class="modal fade" id="DeleteUserModal" tabindex="-1" role="dialog" aria-labelledby="DeleteUserModal" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
    <div class="modal-header label-danger">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Delete User</h4>
    </div>
    <div id="deleteformmodal" class="modal-body">
        Are you sure that you want to delete this user? </br>
        {{ wtf.quick_form(deleteform) }}
    </div>
</div>

        </div>
    </div>
</div>
</div>


{% endblock %}
